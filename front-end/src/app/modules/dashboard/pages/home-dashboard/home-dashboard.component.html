<div class="page-container">
  <div class="page-header">
  <app-page-title [title]="'Panoramica'" [showButton]="false"></app-page-title>
    <div class="user-bar">
      <app-notification></app-notification>
      <app-logged-user></app-logged-user>
    </div>
  </div>
  <div class="page-content" #pageContentInner>
    <!-- Azioni Rapide -->
    <div class="quick-actions">
      <div class="quick-actions-row">
        <h3 class="quick-actions-title">
          <i class="fas fa-bolt"></i>
          Azioni rapide
        </h3>
        <div class="quick-actions-buttons">
          <button class="quick-action-btn">
            <i class="fas fa-plus"></i>
            <span>Aggiungi utente</span>
          </button>
          <button class="quick-action-btn" (click)="aggiungiAppuntamento()">
            <i class="fas fa-plus"></i>
            <span>Aggiungi appuntamento</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Dashboard Cards -->
    <div class="dashboard-stats">
      <div class="row g-4">
        <!-- Card 1: Disponibilità -->
        <div class="col-md-3">
          <div class="stats-card">
            <div class="card-header">
              <h3>Disponibilità</h3>
              <i class="fas fa-external-link-alt card-icon"></i>
            </div>
            <div class="card-content">
              <div class="main-stats">
                <span class="main-number">3</span>
                <span class="main-label">slot liberi</span>
              </div>
              <div class="trend-info positive">
                <i class="fas fa-arrow-up"></i>
                <span>5</span>
                <span class="trend-text">aumentati dallo scorso mese</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Card 2: Corsi attivi -->
        <div class="col-md-3">
          <div class="stats-card">
            <div class="card-header">
              <h3>Corsi attivi</h3>
              <i class="fas fa-external-link-alt card-icon"></i>
            </div>
            <div class="card-content">
              <div class="main-stats">
                <span class="main-number">5</span>
                <span class="main-label">corsi in atto</span>
              </div>
              <div class="trend-info positive">
                <i class="fas fa-arrow-up"></i>
                <span>2</span>
                <span class="trend-text">aumentati dallo scorso mese</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Card 3: Corsi venduti -->
        <div class="col-md-3">
          <div class="stats-card">
            <div class="card-header">
              <h3>Corsi venduti</h3>
              <i class="fas fa-external-link-alt card-icon"></i>
            </div>
            <div class="card-content">
              <div class="main-stats">
                <span class="main-number">12</span>
                <span class="main-label">corsi venduti</span>
              </div>
              <div class="trend-info positive">
                <i class="fas fa-arrow-up"></i>
                <span>6</span>
                <span class="trend-text">aumentati dallo scorso mese</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Card 4: Partecipanti -->
        <div class="col-md-3">
          <div class="stats-card">
            <div class="card-header">
              <h3>Partecipanti</h3>
              <i class="fas fa-external-link-alt card-icon"></i>
            </div>
            <div class="card-content">
              <div class="main-stats">
                <span class="main-number">24</span>
                <span class="main-label">partecipanti totali</span>
              </div>
              <div class="trend-info negative">
                <i class="fas fa-arrow-down"></i>
                <span>2</span>
                <span class="trend-text">diminuito dallo scorso mese</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Prossimi Appuntamenti -->
    <div class="appointments-section">
      <div class="appointments-card">
        <div class="appointments-header">
          <h3>Prossimi appuntamenti (Oggi)</h3>
        </div>
        <div class="appointments-content">
          <!-- Loading -->
          <div *ngIf="loading" class="text-center p-3">
            <i class="fas fa-spinner fa-spin"></i>
            Caricamento...
          </div>

          <!-- Errore -->
          <div *ngIf="error && !loading" class="alert alert-danger">
            <i class="fas fa-exclamation-triangle"></i>
            {{ error }}
          </div>

          <!-- Nessun appuntamento -->
          <div *ngIf="!loading && !error && appuntamentiOggi.length === 0" class="text-center p-3 text-muted">
            <i class="fas fa-calendar-alt"></i>
            <p>Nessun appuntamento per oggi</p>
          </div>

          <!-- Lista appuntamenti -->
          <div *ngFor="let appuntamento of appuntamentiOggi" class="appointment-item">
            <div class="appointment-info">
              <h4>{{ getLabelTipoLezione(appuntamento.tipoLezione) }}</h4>
              <div class="appointment-details">
                <div class="appointment-time">
                  <i class="fas fa-clock"></i>
                  <span>{{ formatTime(appuntamento.dataInizio, appuntamento.dataFine) }}</span>
                </div>
                <div class="appointment-instructor" *ngIf="appuntamento.istruttore">
                  <i class="fas fa-user"></i>
                  <span>{{ appuntamento.istruttore }}</span>
                </div>
              </div>
              <div class="appointment-title" *ngIf="appuntamento.titolo">
                {{ appuntamento.titolo }}
              </div>
            </div>
            <button class="appointment-btn" (click)="modificaAppuntamento(appuntamento.id!)">
              <i class="fas fa-edit"></i>
              Modifica
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="app-layout">
  <!-- Sidebar - FIXED VERSION -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <!-- COMMENTED FOR FUTURE USE - COLLAPSED/EXPANDED MANAGEMENT -->
      <!-- 
      <img
        src="assets/images/elle-studio-logo.png"
        alt="Proxima Icon"
        class="sidebar-logo-icon"
      />
      -->
      <!-- Always show full logo in fixed version -->
      <img
        src="assets/images/elle-studio-logo.png"
        alt="Elle Studio Full Logo"
        class="sidebar-logo-full"
      />
    </div>

    <nav class="sidebar-nav">
      <ul class="nav-menu">
        @for (menuItem of menuItems; track menuItem; let i = $index) {
          <li class="nav-item menu-item">
            <a
              class="nav-link"
              [routerLink]="menuItem.links[0].url"
              routerLinkActive="active"
              (click)="selectLink(menuItem.links[0])"
            >
              <svg
                class="nav-icon"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                @switch (menuItem.title) {
                  @case ('Dashboard') {
                    <!-- Icona con 4 quadrati (come nell'immagine) -->
                    <rect
                      x="3"
                      y="3"
                      width="7"
                      height="7"
                      rx="1"
                      stroke-width="1.5"
                    />
                    <rect
                      x="14"
                      y="3"
                      width="7"
                      height="7"
                      rx="1"
                      stroke-width="1.5"
                    />
                    <rect
                      x="3"
                      y="14"
                      width="7"
                      height="7"
                      rx="1"
                      stroke-width="1.5"
                    />
                    <rect
                      x="14"
                      y="14"
                      width="7"
                      height="7"
                      rx="1"
                      stroke-width="1.5"
                    />
                  }
                  @case ('Calendario') {
                    <!-- Icona calendario (come nell'immagine) -->
                    <rect
                      x="3"
                      y="4"
                      width="18"
                      height="18"
                      rx="2"
                      ry="2"
                      stroke-width="1.5"
                    />
                    <line x1="16" y1="2" x2="16" y2="6" stroke-width="1.5" />
                    <line x1="8" y1="2" x2="8" y2="6" stroke-width="1.5" />
                    <line x1="3" y1="10" x2="21" y2="10" stroke-width="1.5" />
                    <!-- Piccoli punti per i giorni -->
                    <circle cx="8" cy="14" r="0.5" fill="currentColor" />
                    <circle cx="12" cy="14" r="0.5" fill="currentColor" />
                    <circle cx="16" cy="14" r="0.5" fill="currentColor" />
                    <circle cx="8" cy="18" r="0.5" fill="currentColor" />
                    <circle cx="12" cy="18" r="0.5" fill="currentColor" />
                  }
                  @case ('Gestione utenti') {
                    <!-- Icona persona singola (come nell'immagine) -->
                    <path
                      d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"
                      stroke-width="1.5"
                    />
                    <circle cx="12" cy="7" r="4" stroke-width="1.5" />
                  }
                  @case ('Gestione pacchetti') {
                    <!-- Icona cartella/documenti (come nell'immagine) -->
                    <path
                      d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"
                      stroke-width="1.5"
                    />
                    <polyline points="14,2 14,8 20,8" stroke-width="1.5" />
                    <line x1="16" y1="13" x2="8" y2="13" stroke-width="1.5" />
                    <line x1="16" y1="17" x2="8" y2="17" stroke-width="1.5" />
                    <polyline points="10,9 9,9 8,9" stroke-width="1.5" />
                  }
                  @case ('Statistiche') {
                    <!-- Icona grafico a barre (come nell'immagine) -->
                    <line x1="12" y1="20" x2="12" y2="10" stroke-width="1.5" />
                    <line x1="18" y1="20" x2="18" y2="4" stroke-width="1.5" />
                    <line x1="6" y1="20" x2="6" y2="16" stroke-width="1.5" />
                    <!-- Base delle barre -->
                    <line x1="4" y1="20" x2="20" y2="20" stroke-width="1.5" />
                  }
                }
              </svg>
              <span>{{ menuItem.title }}</span>
            </a>
          </li>
        }
      </ul>
    </nav>

    <div class="sidebar-footer">
      <div class="sidebar-user">
        <app-avatar
          [isLogged]="BasicAuth.isLogged()"
          [userName]="BasicAuth.loggedUser()"
          [displayName]="BasicAuth.loggedUserDisplayName()"
        ></app-avatar>
      </div>
      <button class="logout-btn">
        <svg
          class="logout-icon"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          (click)="logout()"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
          />
        </svg>
      </button>
    </div>
  </aside>

  <!-- COMMENTED FOR FUTURE USE - MOBILE TOGGLE BUTTON -->
  <!--
  <button
    class="sidebar-toggle-btn"
    type="button"
    (click)="isSidebarOpen = !isSidebarOpen"
  >
    <span
      class="fa-solid"
      [ngClass]="isSidebarOpen ? 'fa-arrow-left' : 'fa-bars'"
    >
    </span>
  </button>
  -->

  <!-- COMMENTED FOR FUTURE USE - MOBILE OVERLAY -->
  <!--
  <div
    class="sidebar-overlay"
    [class.show]="isSidebarOpen"
    (click)="isSidebarOpen = false"
  ></div>
  -->

  <!-- Main content -->
  <main class="main-content">
    <div class="main-body">
      <!-- Router outlet for dynamic content -->
      <router-outlet></router-outlet>
    </div>
  </main>

  <!-- Notifications OLD -->
  <!-- <app-notification class="bell-button"></app-notification> -->
</div>
